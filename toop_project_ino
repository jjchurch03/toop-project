#include "Arduino.h"
//The setup function is called once at startup of the sketch
int global = 0;

class CRobot{
	String name1;
	String name2;
	int fwd0; //EmoroServo.write(SERVO_0, x);
	int fwd1; //EmoroServo.write(SERVO_1, y);
public:
	 CRobot(String, String, int, int); //default constructor


	void fwdUntil()
	{
		EmoroServo.write(SERVO_0, fwd0);
		EmoroServo.write(SERVO_1, fwd1);
		 if (digitalRead(IO_0) == 0 && digitalRead(IO_1) == 0)
		 {
			 EmoroServo.write(SERVO_0,1500);
			 EmoroServo.write(SERVO_1, 1500);// Both sensors are on the black, stop.
		 }
	}
	//this block is for testing purposes
	//void kill() {
		//stop();
	//}
	//this block is for testing purposes
	void turnRight()
	{
		    Gyr.resetDegrees();
			while (Gyr.readDegreesZ() < 90)
			{
				EmoroServo.write(SERVO_0, 1400);//this makes the robot turn right
				EmoroServo.write(SERVO_1, 1400);
			}
	}

	void turnLeft()
	{
		Gyr.resetDegrees();
		while (Gyr.readDegreesZ() > 270 || Gyr.readDegreesZ() == 0)//counterclockwise 90 degree turn
			{
				EmoroServo.write(SERVO_0, 1600);//this makes the robot turn left
				EmoroServo.write(SERVO_1, 1600);
			}
	}

	void aboutFace()
	{
		Gyr.resetDegrees();
		while (Gyr.readDegreesZ() > 180)//counterclockwise 90 degree turn
			{
				EmoroServo.write(SERVO_0, 1600);//this makes the robot turn left
				EmoroServo.write(SERVO_1, 1600);
			}
	}

	void buttonPressed()
	{
	if (ReadSwitch(SW_1)==1) //SW_1 pressed
			{
			Gyr.resetDegrees();
			 //Lcd.locate(0,0);
			 //Lcd.print(name1);
			 //Lcd.locate(1,0);
			 //Lcd.print(name2);
			 global = 1;
			}
	}
};

CRobot::CRobot(String a, String b, int c, int d) {
name1 = a;
name2 = b;
fwd0 = c;
fwd1 = d;
}


CRobot Bob("Joe Church", "Rohan Iyer", 1640, 1335);

void setup()
{

	 InitEmoro();
	 Gyr.init();
	 Lcd.init();
	 EmoroServo.attach(SERVO_0);
	 EmoroServo.attach(SERVO_1);
	 pinMode(IO_0,INPUT_PULLUP );
	 pinMode(IO_1,INPUT_PULLUP );
	 Lcd.locate(0,0);
	 Lcd.print("Joe Church");
	 Lcd.locate(1,0);
	 Lcd.print("Rohan Iyer");

}


// The loop function is called in an endless loop
void loop()
{
	Bob.buttonPressed();
		if (global==1) {
			Bob.fwdUntil();
		}


}
